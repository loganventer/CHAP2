@model CHAP2.Domain.Entities.Chorus
@{
    ViewData["Title"] = Model.Name;
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@Model.Name - CHAP2</title>
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/chorus-display.css" asp-append-version="true" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="chorus-display-page">
    <!-- Animated Background -->
    <div class="animated-background">
        <!-- Musical Staff Lines with Wave Effect -->
        <svg class="musical-staff-background" viewBox="0 0 1000 1000" preserveAspectRatio="none">
            <!-- Single Staff (5 lines, centered and spaced farther apart) -->
            <g class="staff-group staff-center">
                <line class="staff-line wave-line-1" x1="0" y1="350" x2="1000" y2="350" />
                <line class="staff-line wave-line-2" x1="0" y1="410" x2="1000" y2="410" />
                <line class="staff-line wave-line-3" x1="0" y1="470" x2="1000" y2="470" />
                <line class="staff-line wave-line-4" x1="0" y1="530" x2="1000" y2="530" />
                <line class="staff-line wave-line-5" x1="0" y1="590" x2="1000" y2="590" />
            </g>
        </svg>

        <!-- Flowing Musical Notes (Right to Left) -->
        <div class="flowing-notes-container" id="flowingNotesContainer"></div>
    </div>

    <!-- Page Indicator -->
    <div class="page-indicator" id="pageIndicator"></div>

    <!-- Main Content -->
    <div class="chorus-container">
        <div class="chorus-header">
            <h1 class="chorus-title" id="chorusTitle">@Model.Name</h1>
            <div class="chorus-key" id="chorusKey">@Model.Key</div>
        </div>
        
        <div class="chorus-content-wrapper">
            <!-- Navigation -->
            <button class="nav-btn prev-btn" id="prevBtn" title="Previous Chorus">
                <i class="fas fa-chevron-left"></i>
            </button>
            
            <div class="chorus-content">
                <div class="chorus-text" id="chorusText">
                    @{
                        var lines = Model.ChorusText.Split('\n');
                        foreach (var line in lines)
                        {
                            if (!string.IsNullOrWhiteSpace(line))
                            {
                                <div class="text-line">@line</div>
                            }
                            else
                            {
                                <div class="text-line empty-line"></div>
                            }
                        }
                    }
                </div>
            </div>
            
            <button class="nav-btn next-btn" id="nextBtn" title="Next Chorus">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
    </div>

    <!-- Controls -->
    <div class="controls-container">
        <button class="control-btn" id="decreaseFontBtn" title="Decrease Font Size">
            <i class="fas fa-minus"></i>
        </button>
        <button class="control-btn" id="increaseFontBtn" title="Increase Font Size">
            <i class="fas fa-plus"></i>
        </button>
        <button class="control-btn" id="printBtn" title="Print">
            <i class="fas fa-print"></i>
        </button>
        <button class="control-btn" id="closeBtn" title="Close">
            <i class="fas fa-times"></i>
        </button>
    </div>

    <script>
        // Pass chorus data to JavaScript
        window.chorusData = {
            id: '@Model.Id',
            name: '@Html.Raw(Json.Serialize(Model.Name))',
            key: '@Model.Key',
            text: '@Html.Raw(Json.Serialize(Model.ChorusText))'
        };
        
        // Chorus display configuration
        window.chorusDisplayConfig = {
            maxDisplayLines: 8 // Configurable maximum lines per page
        };
    </script>
    <script src="~/js/chorus-display.js" asp-append-version="true"></script>
</body>
</html> 